(this.webpackJsonpHomeQuarters=this.webpackJsonpHomeQuarters||[]).push([[0],{21:function(e,t,a){},32:function(e,t,a){e.exports=a(64)},37:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),u=a.n(c),s=(a(37),a(3)),o=a(4),i=a.n(o),l=a(10),m=a(7),p=a(14),d=a.n(p),f=(a(39),a(42),a(65),{apiKey:"".concat("AIzaSyAtLniZQdlpV2NobNY_d7Kubt6h8QjO_p4"),authDomain:"fir-playground-95e29.firebaseapp.com",databaseURL:"https://fir-playground-95e29.firebaseio.com",projectId:"fir-playground-95e29",storageBucket:"fir-playground-95e29.appspot.com",messagingSenderId:"795038813155",appId:"1:795038813155:web:f6b905ee433d61d2a22ed6",measurementId:"G-F3S3RPPPJM"});d.a.initializeApp(f);var b=d.a.firestore(),h=d.a.auth(),E=d.a.storage(),v=new d.a.auth.GoogleAuthProvider,g=function(){return h.signInWithPopup(v)},N=function(){return h.signOut()},j=function(e,t){return h.signInWithEmailAndPassword(e,t).then("success!").catch((function(e){return console.log(e)}))};window.firebase=d.a;var O=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n,r,c,u,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=b.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,c=t.email,u=t.photoURL,s=new Date,e.prev=9,e.next=12,n.set(Object(l.a)({displayName:r,email:c,photoURL:u,createdAt:s},a));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("error creating user",e.t0.message);case 17:return e.abrupt("return",y(t.uid));case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.abrupt("return",b.collection("users").doc(t));case 6:e.prev=6,e.t0=e.catch(2),console.error("error fetching user",e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[2,6]])})));return function(t){return e.apply(this,arguments)}}(),w=(d.a,b.collection("housemates")),x=b.collection("users"),k=(a(44),a(45),a(6));var C=function(e){var t=e.photoURL,a=Object(n.useState)(500),c=Object(s.a)(a,2),u=c[0],o=c[1],i=function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;o(e)};return Object(n.useEffect)((function(){return window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}}),[]),r.a.createElement("div",{className:"current-user"},r.a.createElement(k.b,{to:"/home",className:"link-home"},u>400?r.a.createElement("h1",{className:"title"},"HomeQuarters"):r.a.createElement("h1",{className:"title"},"HQ")),r.a.createElement("div",{className:"current-user-actions"},r.a.createElement("button",{className:"sign-out-button",onClick:N},"sign out"),r.a.createElement("div",{className:"profile-picture-container"},t?r.a.createElement(k.b,{to:"/profile",className:"link-profile"},r.a.createElement("img",{className:"profile-picture",src:t,alt:"user thumbnail"})):r.a.createElement(k.b,{to:"/profile",className:"link-profile"},r.a.createElement("img",{className:"default-profile-picture",src:"".concat("/HomeQuarters","/default-profile.png"),alt:"default"})))))},S=(a(21),a(13)),A=Object(n.createContext)({user:null});function L(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),c=a[0],u=a[1],o=Object(n.useState)(!1),p=Object(s.a)(o,2),d=p[0],f=p[1],b=Object(n.useState)(!1),E=Object(s.a)(b,2),v=E[0],g=E[1],N=Object(S.f)(),j=e.children;return Object(n.useEffect)((function(){var e=h.onAuthStateChanged(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.next=3,O(t);case 3:e.sent.onSnapshot((function(e){u(Object(l.a)({uid:e.id},e.data())),f(!0)})),N.push("/home"),f(!0),e.next=10;break;case 9:N.push("/HomeQuarters");case 10:u(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){e()}}),[]),Object(n.useEffect)((function(){g(!!c)}),[c]),r.a.createElement(A.Provider,{value:{user:c,userLoaded:d,isLoggedIn:v,setIsLoggedIn:g}},j)}var Q=function(e){var t=e.id,a=e.name,c=e.user,u=Object(n.useContext)(A);function s(){return(s=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.doc(t).delete().then(console.log("deleted: ".concat(a))).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{key:t,className:"housemate"},r.a.createElement(k.b,{to:"/housemate/".concat(t),className:"housemate-name"},r.a.createElement("h2",null,a)),r.a.createElement("div",{className:"post-information"},c&&r.a.createElement("span",{className:"posted-by"},"added by ",c.displayName," "),function(e,t){return!!e&&e.uid===t.uid}(u.user,c)&&r.a.createElement("button",{className:"move-out-button",onClick:function(){return function(e){return s.apply(this,arguments)}(t)}},"move out")))},U=Object(n.createContext)();function H(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],u=a[1],o=e.children;return Object(n.useEffect)((function(){var e=w.onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return{id:e.id,name:t.name,gender:t.gender,user:{displayName:t.user.displayName,uid:t.user.uid}}}));u(t)}));return function(){e()}}),[]),r.a.createElement(U.Provider,{value:c},o)}var R=a(2);var D=function(){var e=Object(n.useState)({name:"",gender:"female"}),t=Object(s.a)(e,2),a=t[0],c=t[1],u=Object(n.useContext)(A).user,o=(h.currentUser||{}).uid;function p(e){return d.apply(this,arguments)}function d(){return(d=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),c({name:"",gender:"female"}),e.next=5,w.add({name:a.name,gender:a.gender,user:{displayName:u.displayName,uid:o}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("sign in to add a housemate");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"add-housemate-container"},u&&r.a.createElement("div",{className:"add-housemate"},r.a.createElement("input",{type:"text",value:a.name,placeholder:"add housemate",name:"name",onChange:function(e){var t=e.target,a=t.name,n=t.value;c((function(e){return Object(l.a)({},e,Object(R.a)({},a,n))}))},onKeyUp:function(e){if(13===e.keyCode){if(0===a.name.length)return;p(e)}},className:"add-housemate-name input",required:!0}),r.a.createElement("button",{type:"submit",onClick:p,className:"submit-housemate-button"},"enter")))};var I=function(){var e=Object(n.useContext)(U),t=Object(n.useContext)(A),a=t.user,c=t.userLoaded;return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement(C,a),r.a.createElement("div",{className:"housemates-page"},r.a.createElement("div",{className:"housemates-container"},r.a.createElement(D,null),e.map((function(e){return r.a.createElement(Q,Object.assign({},e,{key:e.id}))})))))};a(50);var P=function(e){var t=e.onCreate,a=Object(n.useState)(""),c=Object(s.a)(a,2),u=c[0],o=c[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==u.length?(t(u),o("")):alert("enter a comment before submitting")},className:"add-comment"},r.a.createElement("textarea",{className:"textarea-add-comment",placeholder:"enter your comment here",value:u,onChange:function(e){var t=e.target.value;o(t)},rows:"3",resize:"none"}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"submit-comment-button"},"submit"))};var T=function(e){var t=e.comment,a=e.createdAt,n=e.author;return r.a.createElement("div",{className:"comment"},r.a.createElement("p",{className:"comment-body"},t),r.a.createElement("p",{className:"comment-author"},"- ",n),r.a.createElement("p",{className:"comment-timestamp"}," ",a))};var W=function(e){var t=e.comments,a=e.onCreate;return r.a.createElement("div",{className:"comments-container"},r.a.createElement(P,{onCreate:a}),t.map((function(e){return r.a.createElement(T,Object.assign({},e,{key:Math.random()}))})))};var z=Object(S.g)(function(e){var t=function(t){return r.a.createElement(A.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({user:a},t))}))};return t.displayName="WithUser(".concat(function(e){return e.displayName||e.name||"Component"}(t),")"),t}((function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),c=a[0],u=a[1],o=Object(n.useState)([]),i=Object(s.a)(o,2),m=i[0],p=i[1],d=Object(n.useState)(!1),f=Object(s.a)(d,2),h=f[0],E=f[1],v=Object(n.useContext)(A),g=v.userLoaded,N=v.user,j=e.match.params.id,O=b.doc("housemates/".concat(j)),y=O.collection("comments");return Object(n.useEffect)((function(){var e=O.onSnapshot((function(e){var t=function(e){var t=e.data();return Object(l.a)({id:e.id},t)}(e);u(t),E(!0)})),t=y.onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return Object(l.a)({id:e.id},t)}));p(t)}));return function(){e(),t()}}),[]),r.a.createElement(r.a.Fragment,null,g&&r.a.createElement(C,N),r.a.createElement("section",{className:"housemate-container"},c&&h&&r.a.createElement(Q,c),r.a.createElement(W,{comments:m,onCreate:function(t){var a=e.user,n=new Date;y.add({comment:t,createdAt:n.toDateString(),author:a.user.displayName})}})))})));a(51);var F=function(e){var t=e.setAuthType,a=function(e){t(e)};return r.a.createElement("div",{className:"landing-page"},r.a.createElement("section",{className:"main-landing-page"},r.a.createElement("h1",{className:"title-landing-page"},"HomeQuarters"),r.a.createElement("h2",{className:"subtitle-landing-page"},"connect with your housemates"),r.a.createElement("div",{className:"button-auth-container"},r.a.createElement(k.b,{to:"/HomeQuarters/auth",className:"link-button"},r.a.createElement("button",{className:"button button-auth",onClick:function(){return a("sign in")}},"sign in")),r.a.createElement(k.b,{to:"/HomeQuarters/auth"},r.a.createElement("button",{className:"button button-auth",onClick:function(){return a("sign up")}},"sign up")))))};var K=function(e){var t=e.setAuthType,a=Object(n.useState)({displayName:"",email:"",password:""}),c=Object(s.a)(a,2),u=c[0],o=c[1];function p(e){var t=e.target,a=t.name,n=t.value;o((function(e){return Object(l.a)({},e,Object(R.a)({},a,n))}))}function d(){return(d=Object(m.a)(i.a.mark((function e(){var t,a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.displayName,a=u.email,n=u.password,e.prev=1,e.next=4,h.createUserWithEmailAndPassword(a,n);case 4:r=e.sent,c=r.user,O(c,{displayName:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0);case 12:o({displayName:"",email:"",password:""});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"email-authentication"},r.a.createElement("input",{type:"text",name:"displayName",value:u.displayName,onChange:function(e){return p(e)},className:"sign-in-input input",placeholder:"display name"}),r.a.createElement("input",{type:"email",name:"email",value:u.email,onChange:function(e){return p(e)},className:"sign-in-input input",placeholder:"email"}),r.a.createElement("input",{type:"password",name:"password",value:u.password,onChange:function(e){return p(e)},className:"sign-in-input input",placeholder:"password"}),r.a.createElement("div",{className:"button-sign-in-container"},r.a.createElement(k.b,{to:"/HomeQuarters"},r.a.createElement("button",{className:"button button-email-sign-up",onClick:function(){return d.apply(this,arguments)}},"sign up with email"))),r.a.createElement(k.b,{to:"/HomeQuarters/auth"},r.a.createElement("p",{className:"link-to-sign-in",onClick:function(){return t("sign in")}},"already have an account?")))};var J=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(""),o=Object(s.a)(u,2),i=o[0],l=o[1],m=Object(n.useState)("error signing in"),p=Object(s.a)(m,2),d=p[0],f=(p[1],Object(n.useState)("hide-error")),b=Object(s.a)(f,2),h=b[0];function E(e){var t=e.target,a=t.type,n=t.value;"email"!==a?l(n):c(n)}return b[1],r.a.createElement("div",{className:"sign-in"},r.a.createElement("p",{className:"".concat(h," error-message")},d),r.a.createElement("input",{type:"email",className:"sign-in-input input",onKeyUp:function(e){13===e.keyCode&&j(a,i)},value:a,onChange:E,placeholder:"email"}),r.a.createElement("input",{type:"password",className:"sign-in-input input",value:i,onChange:E,placeholder:"password"}),r.a.createElement("div",{className:"button-sign-in-container"},r.a.createElement("button",{onClick:function(){return j(a,i)},className:"button button-email-sign-in"},"sign in with email"),r.a.createElement("button",{className:"button button-google-sign-in",onClick:g},"sign in with google")))};a(52);var M=function(e){var t=e.authType,a=e.setAuthType,c=Object(n.useRef)(null);return r.a.createElement("div",{className:"auth-page",ref:c},r.a.createElement("h3",{className:"auth-page-label"},t),"sign in"===t?r.a.createElement(J,null):r.a.createElement(K,{setAuthType:a}))};a(53);var _=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],u=Object(n.useRef)(null),o=Object(n.useContext)(A),l=o.user,p=o.userLoaded,d=Object(n.useState)(""),f=Object(s.a)(d,2),v=f[0],g=f[1],N=Object(S.f)(),j=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=5;break}return N.push("/HomeQuarters"),e.next=4,x.doc(h.currentUser.uid).delete();case 4:console.log("account successfully deleted");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a){e.next=5;break}return e.next=4,x.doc(h.currentUser.uid).update({displayName:a});case 4:c("");case 5:u&&u.current.files[0]&&E.ref().child("user-profiles").child(h.currentUser.uid).child(u.current.files[0].name).put(u.current.files[0]).then(u.current.value="").then((function(e){return e.ref.getDownloadURL()})).then((function(e){return b.collection("users").doc(h.currentUser.uid).update({photoURL:e})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){if(l){var e=l.createdAt.toDate().toDateString().split(" "),t=e.filter((function(t){if(e.indexOf(t)%2===1)return!0})).join(" ");g(t)}}()}),[]),r.a.createElement(r.a.Fragment,null,p&&r.a.createElement(C,l),r.a.createElement("section",{className:"user-profile"},l&&r.a.createElement("div",{className:"about-user"},r.a.createElement("div",{className:"about-user-img-container"},r.a.createElement("img",{alt:"user-img",src:l.photoURL,className:"about-user-img"})),r.a.createElement("div",{className:"user-info-container"},r.a.createElement("h2",{className:"user-info-name"},l.displayName),r.a.createElement("p",{className:"user-info-date"},"member since ",r.a.createElement("br",null),v))),r.a.createElement("div",{className:"edit-user-info"},r.a.createElement("h3",{className:"edit-user-info-header"},"edit your profile"),r.a.createElement("form",{onSubmit:O},r.a.createElement("label",{className:"user-profile-label-name"},"display name:",r.a.createElement("input",{type:"text",value:a,className:"user-profile-input-name",onChange:function(e){var t=e.target.value;c(t)},placeholder:"name"})),r.a.createElement("br",null),r.a.createElement("span",null,"profile picture:"),r.a.createElement("label",{className:"file-input-button"},"choose image to upload",r.a.createElement("input",{type:"file",ref:u,className:"file-input"})),r.a.createElement("button",{type:"submit",className:"submit-edit-button"},"submit"))),r.a.createElement("div",null,r.a.createElement("button",{className:"delete-account button",onClick:j},"delete account"))))};var B=function(){return r.a.createElement("div",{className:"signature-container"},r.a.createElement("a",{href:"https://sophietsai.com/",target:"_blank",rel:"noopener noreferrer",className:"signature"},"created by sophie tsai."))},G=a(31),q=a(30),V=a.n(q);var Y=function(){var e=Object(n.useState)("sign up"),t=Object(s.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(0),o=Object(s.a)(u,2),i=o[0],l=o[1],m=Object(n.useRef)(null);return Object(n.useEffect)((function(){return i||l(V()({el:m.current,mouseControls:!0,touchControls:!0,scale:1,scaleMobile:1,color:9794,backgroundColor:15063770,points:5,maxDistance:18,spacing:17,THREE:G})),function(){i&&i.destroy()}}),[i]),r.a.createElement("div",{className:"main-app-container"},r.a.createElement("div",{id:"vanta-background",ref:m}),r.a.createElement(S.c,null,r.a.createElement(S.a,{exact:!0,path:"/HomeQuarters"},r.a.createElement(F,{setAuthType:c})),r.a.createElement(S.a,{exact:!0,path:"/profile"},r.a.createElement(_,null)),r.a.createElement(S.a,{exact:!0,path:"/housemate/:id"},r.a.createElement(z,null)),r.a.createElement(S.a,{exact:!0,path:"/home"},r.a.createElement(I,null)),r.a.createElement(S.a,{exact:!0,path:"/HomeQuarters/auth"},r.a.createElement(M,{authType:a,setAuthType:c})),r.a.createElement(S.a,{component:function(){return r.a.createElement("h1",{className:"page-404"},"404 page not found")}})),r.a.createElement(B,null))};u.a.render(r.a.createElement(k.a,null,r.a.createElement(L,null,r.a.createElement(H,null,r.a.createElement(Y,null)))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.ac2dfc80.chunk.js.map